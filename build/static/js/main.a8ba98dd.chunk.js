(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,n,t){"use strict";t.r(n);var r=t(14),o=t.n(r),i=t(3),u=t(2),c=t(4),a=t.n(c),l="/api/persons",s=function(){return a.a.get(l).then((function(e){return e.data}))},d=function(e){return a.a.post(l,e).then((function(e){return e.data}))},b=function(e,n){return a.a.put(l+"/"+e,n).then((function(e){return e.data}))},f=function(e){return a.a.delete(l+"/"+e).then((function(e){return e.data}))},j=t(0),h=function(e){var n=e.filter,t=e.handleFilter;return Object(j.jsxs)("p",{children:["Filter: ",Object(j.jsx)("input",{value:n,onChange:t})]})},m=function(e){return Object(j.jsxs)("form",{onSubmit:e.addPerson,children:[Object(j.jsx)("h2",{children:"Add new person"}),Object(j.jsxs)("div",{children:["Name: ",Object(j.jsx)("input",{value:e.newName,onChange:e.handleNameChange}),Object(j.jsx)("br",{}),"Number: ",Object(j.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"add"})})]})},v=function(e){var n=e.persons,t=e.filter,r=e.removePerson;return Object(j.jsx)("div",{children:n.map((function(e){return"undefined"===typeof e.name?null:e.name.toLowerCase().includes(t.toLowerCase())?g({person:e,removePerson:r}):null}))})},O=function(e){var n=e.notification;return null===n?null:Object(j.jsx)("div",{className:"notification",style:{color:"green",fontSize:20,borderWidth:2,borderColor:"green",borderStyle:"solid",display:"inline",backgroundColor:"rgb(190,190,190)",padding:5},children:n})},p=function(e){var n=e.errorMessage;return null===n?null:Object(j.jsx)("div",{className:"error",style:{color:"red",fontSize:20,borderWidth:2,borderColor:"red",borderStyle:"solid",display:"inline",backgroundColor:"rgb(190,190,190)",padding:5},children:n})},g=function(e){var n=e.person,t=e.removePerson;return Object(j.jsxs)("p",{children:[n.name," ",n.number," ",Object(j.jsx)(x,{removePerson:t,id:n.id})]},n.id)},x=function(e){var n=e.id,t=e.removePerson;return Object(j.jsx)("button",{type:"button",id:n,onClick:t,children:"Delete"})},w=function(){var e=Object(u.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1];Object(u.useEffect)((function(){s().then((function(e){r(e)}))}),[]);var o=Object(u.useState)(""),c=Object(i.a)(o,2),a=c[0],l=c[1],g=Object(u.useState)(""),x=Object(i.a)(g,2),w=x[0],y=x[1],C=Object(u.useState)(""),N=Object(i.a)(C,2),S=N[0],P=N[1],k=Object(u.useState)(null),T=Object(i.a)(k,2),D=T[0],F=T[1],z=Object(u.useState)(null),A=Object(i.a)(z,2),E=A[0],J=A[1];return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{children:"Phonebook"}),Object(j.jsx)(h,{filter:S,handleFilter:function(e){P(e.target.value)}}),Object(j.jsx)(p,{errorMessage:E}),Object(j.jsx)(O,{notification:D}),Object(j.jsx)(m,{addPerson:function(e){e.preventDefault();var n={name:a,number:w};if(t.some((function(e){return e.name===a}))){var o=t.find((function(e){return e.name===a}));window.confirm("".concat(a," is aleady added to phonebook. Do you want to replace the number ").concat(o.number," with ").concat(w,"?"))&&b(o.id,n).then((function(e){r(t.map((function(n){return n.id!==o.id?n:e}))),F("Number for "+o.name+" have been changed to "+w+"."),setTimeout((function(){F(null)}),2e3)})).catch((function(e){J(o.name+" is already removed from the server"),r(t.filter((function(e){return e.id!==o.id}))),setTimeout((function(){F(null)}),5e3)}))}else d(n).then((function(e){r(t.concat(e)),F(a+" have been added to the Phonebook"),setTimeout((function(){F(null)}),2e3)})).catch((function(e){J(e.response.data.error),console.log(e.response.data),setTimeout((function(){J(null)}),5e3)}));l(""),y("")},newName:a,handleNameChange:function(e){l(e.target.value)},newNumber:w,handleNumberChange:function(e){y(e.target.value)}}),Object(j.jsx)("h2",{children:"Numbers"}),Object(j.jsx)(v,{persons:t,removePerson:function(e){var n=String(e.target.id),o=t.find((function(e){return e.id===n}));window.confirm("Are you sure you want to remove "+o.name)&&f(n).then((function(e){r(t.map((function(t){return t.id!==n?t:e}))),F(o.name+" have been removed"),setTimeout((function(){F(null)}),2e3)})).catch((function(e){J(o.name+" is already removed from the server"),r(t.filter((function(e){return e.id!==o.id}))),setTimeout((function(){F(null)}),5e3)}))},filter:S})]})};o.a.render(Object(j.jsx)(w,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.a8ba98dd.chunk.js.map